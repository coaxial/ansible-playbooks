---
- hosts: all
  become: true

  tasks:
    - name: Install mosh
      package:
        name: mosh
        state: latest

    - name: Open firewall ports for mosh
      ufw:
        rule: allow
        port: '60000:60015'
        proto: udp

    - name: Install tmux
      package:
        name: tmux
        state: latest

    - name: Configure tmux
      copy:
        src: files/tmux.conf
        dest: /home/user/.tmux.conf
        owner: user
        group: user
        mode: 0644
